---
apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::CHANGE_ME:role/eks-serviceaccount-pod-web-identity-test
  labels:
    app: tester
    team: platform
  name: pod-web-identity-test
  namespace: default
---
apiVersion: v1
kind: Pod
metadata:
  name: aws-cli
  namespace: default
  labels:
    app: aws-cli
spec:
  serviceAccountName: pod-web-identity-test
  containers:
  - image: amazon/aws-cli
    command:
      - "sleep"
      - "604800"
    imagePullPolicy: IfNotPresent
    name: awscli
  restartPolicy: Always

# k exec -it aws-cli -- /bin/bash
# kubectl apply -f ./k8s/cli-pod-web-identity/fixtures/k8s-config.yml
# kubectl delete -f ./k8s/cli-pod-web-identity/fixtures/k8s-config.yml